name: Test

on:
  push:
    paths: .github/workflows/testable.yml
  workflow_dispatch:
  
jobs:
  # This workflow contains a single job called "build"
  deploy:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    steps:
      # using fetch-depth = 0 to make the entire history of commits available
      
    - name: install sfdx via .tar
      run: |
        wget https://developer.salesforce.com/media/salesforce-cli/sfdx-linux-amd64.tar.xz
        mkdir sfdx-cli
        tar xJf sfdx-linux-amd64.tar.xz -C sfdx-cli --strip-components 1
        ./sfdx-cli/install
    - name: Attempting to cache the whole sfdx-cli
      run: which sfdx
    - run: sfdx alias:list
