name: Test

on:
  push:
    paths: .github/workflows/testable.yml
  workflow_dispatch:
  
jobs:
  # This workflow contains a single job called "build"
  deploy:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    steps:
      # using fetch-depth = 0 to make the entire history of commits available
      
    - uses: actions/checkout@v2
      with: 
        fetch-depth: 0

    - name: Attempting to cache the whole sfdx-cli
      id: cachehit
      uses: actions/cache@v3
      with:
        path: /opt/hostedtoolcache/node/16.14.0/x64/bin/sfdx
        key: test-build-jay-repo-name-sfdx

    - name: Setup Node
      uses: actions/setup-node@v1
      with: 
        node-version: '16'

    - name: Installations and Support Tasks
      if: steps.cachehit.outputs.cache-hit!='true'
      run: |
        npm install sfdx-cli --global
        echo y | sfdx plugins:install sfdx-git-delta
    - name: test with sfdx
      run: which sfdx
      
#     - name: Attempting to cache the whole sfdx-cli
#       id: cachehit
#       uses: actions/cache@v3
#       with:
#         path: /opt/hostedtoolcache/node/16.14.0/x64/bin/sfdx
#         key: test-build-jay-repo-name-sfdx

        
    

#     steps:      
#     - run: echo "Jay is great" >> chamberlain.txt
        
#     - name: Storing Artifacts
#       uses: actions/download-artifact@v2
#       with: 
#         name: Jay test
#         path: ./chamberlain.txt

